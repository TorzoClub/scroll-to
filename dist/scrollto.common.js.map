{"version":3,"file":"scrollto.common.js","sources":["../node_modules/bezier-easing/src/index.js","../src/index.js"],"sourcesContent":["/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import BezierEasing from 'bezier-easing'\n\nconst throwError = msg => { throw Error(`[scroll-to] ${msg}`) }\n\nexport default function scrollTo(opt) {\n  const {\n    container = document.body,\n    valueProperty = 'scrollTop',\n    value = throwError('require value'),\n    cubicBezier = [0.25, 0.1, 0.25, 1],\n    duration = 1000,\n    done\n  } = opt\n\n  let needStop = false\n  const initValue = container[valueProperty]\n  const length = value - initValue\n\n  const easing = BezierEasing(...cubicBezier)\n\n  let initTime = null\n\n  const animateFrame = time => {\n    if (initTime === null) {\n      initTime = time\n    }\n\n    const currentTime = time - initTime\n\n    const percent = easing(currentTime / duration)\n\n    container[valueProperty] = initValue + (percent * length)\n\n    if (currentTime > duration) {\n      needStop = true\n    }\n\n    if (needStop) {\n      done && done()\n    } else {\n      window.requestAnimationFrame(animateFrame)\n    }\n  }\n\n  window.requestAnimationFrame(animateFrame)\n\n  return () => {\n    needStop = true\n  }\n}\n"],"names":["throwError","msg","Error","scrollTo","opt","container","document","body","valueProperty","value","cubicBezier","duration","done","needStop","initValue","length","easing","BezierEasing","initTime","animateFrame","time","currentTime","percent","window","requestAnimationFrame"],"mappings":"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"}